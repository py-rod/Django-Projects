<!DOCTYPE html>
<html lang="en">

    <head>
        {% load static %}
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="icon" href="{% static 'icons/store.png' %}">

        <!-- BOOTSTRAP -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css
        ">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js
        ">

        <!-- MAIN STYLES -->
        <link rel="stylesheet" href="{% static 'css/base.css' %}" type="text/css">
        <link rel="stylesheet" href="{% static 'css/view-all-recent-product.css' %}" type="text/css">
        <link rel="stylesheet" href="{% static 'css/view-all-product.css' %}" type="text/css">

        <!-- USERS STYLES -->


        <title>
            {% block title %}Home{% endblock %}
        </title>

    </head>

    <body>
        <header class="header">
            <nav class="navbar navbar-dark">
                <div class="container-fluid ms-auto">
                    <a class="navbar-brand header-logo" href="{% url 'base' %}">Ecommerce</a>

                    <div class="content-menu">
                        <a href="" class="header-cart"><img src="../../static/icons/cart.svg" alt="Cart"></a>

                        <div class="btn-group dropstart">
                            <button type="button" class="btn btn-secondary dropdown-toggle" data-bs-toggle="dropdown"
                                aria-expanded="false">
                                Filtros
                            </button>
                            <ul class="dropdown-menu">
                                <form action="" method="GET" class="filter-menu">
                                    {{form.as_p}}
                                    <button class="button-filter">Filtrar</button>
                                </form>
                            </ul>
                        </div>

                        <button class=" button-menu" type="button" data-bs-toggle="offcanvas"
                            data-bs-target="#offcanvasRight" aria-controls="offcanvasRight">
                            <img src="../../static/icons/menu.svg" alt="Menu">
                        </button>

                        <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight"
                            aria-labelledby="offcanvasRightLabel">
                            <div class="offcanvas-header">
                                <div class="content-forms-up-in">
                                    {% if user.is_authenticated %}
                                    <img src="" class="profile-pick" alt="profile pick">
                                    {% else %}
                                    <img src="../../static/images/noimage_user.jpg" class="profile-pick"
                                        alt="profile pick">
                                    <a href="">Iniciar Sesion</a>
                                    <a href="">Registrarse</a>

                                    {% endif %}
                                </div>
                                <button type="button" class="btn btn-close btn-outline button-close-menu"
                                    data-bs-dismiss="offcanvas" aria-label="Close"></button>
                            </div>
                            <div class="offcanvas-body">


                                <form class="d-flex search-offcanvas" role="search">
                                    <input class="form-control me-1" type="search" placeholder="Buscar"
                                        aria-label="Search">
                                    <button class="button-search" type="submit">Buscar</button>
                                </form>

                                <ul class="content-categories">
                                    <li>
                                        <h3>Categorias</h3>
                                    </li>
                                    {% for categorie in categories %}
                                    <li class="categorie"><a href="/{{categorie.slug}}">{{categorie.name}}</a></li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </nav>
        </header>



        {% block content %}
        {% block products %}
        <main class="main-index">
            <section class="section-1-base">
                <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-indicators">
                        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0"
                            class="active" aria-current="true" aria-label="Slide 1"></button>
                        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"
                            aria-label="Slide 2"></button>
                        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"
                            aria-label="Slide 3"></button>
                    </div>
                    <div class="carousel-inner">
                        {% for image in images %}
                        <div class="carousel-item active" data-bs-interval="3300">
                            <img src="{{image.image1.url}}" class="d-block w-100 image-carousel" alt="image1">
                        </div>
                        <div class="carousel-item" data-bs-interval="3300">
                            <img src="{{image.image2.url}}" class="d-block w-100 image-carousel" alt="image2">
                        </div>
                        <div class="carousel-item" data-bs-interval="3300">
                            <img src="{{image.image3.url}}" class="d-block w-100 image-carousel" alt="image3">
                        </div>
                        {% endfor %}
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators"
                        data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Anterior</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators"
                        data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Siguiente</span>
                    </button>
                </div>
            </section>

            <section class="section-2-base">
                <h2>Recien ingresados</h2>
                <div class="content-products">
                    {% for recent in recents|slice:"8" %}
                    <a href="/{{recent.slug}}">
                        <div class="card">
                            <img src="{{recent.image.url}}" class="card-img-top" alt="{{recent.name}}">
                            <div class="card-body">
                                <h5 class="card-title">{{recent.name}}</h5>
                                <p class="card-text">{{recent.brand}}</p>
                                <p class="card-price">${{recent.price|floatformat:2}}</p>
                            </div>
                        </div>
                    </a>
                    {% endfor %}
                </div>
                <a href="{% url 'all-recent' %}" class="view-all">Ver mas</a>
            </section>

            <section class="section-3-base">
                <h2>Todos los productos</h2>
                <div class="content-products">
                    {% for product in products|slice:"8"%}
                    <a href="/{{product.slug}}">
                        <div class="card">
                            <img src="{{product.image.url}}" class="card-img-top" alt="{{product.name}}">
                            <div class="card-body">
                                <h5 class="card-title">{{product.name}}</h5>
                                <p class="card-text">{{product.brand}}</p>
                                <p class="card-price">${{product.price|floatformat:2}}</p>
                            </div>
                        </div>
                    </a>
                    {% endfor %}
                </div>
                <a href="{% url 'all-products' %}" class="view-all">Ver mas</a>
            </section>
        </main>
        {% endblock %}
        {% endblock %}

        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
            integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
            crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
            integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
            crossorigin="anonymous"></script>
        <script src="{% static 'js/window-title.js' %}"></script>

    </body>

</html>